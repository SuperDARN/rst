
<head>
<title>MapOrthographic</title>
<link rel=stylesheet href=../../../css/doc.css type=text/css>
</head>
<body>

<div id="root">

<div id="banner">
</div>


<div id="location">
<table width=100% class="location"><tr>
<td><a href="../../../index.html">Home</a><td>|</td>
<td><a href=../../../general/index.html>general</a></td>
<td>|</td><td><a href=../../../general/src.lib/index.html>src.lib</a></td><td>|</td><td><a href=../../../general/src.lib/map/index.html>map</a></td><td>|</td>
<td>MapOrthographic</td>
<td width=100% align=right><a href=../../../general/src.lib/indexdoc.html>Index</a></td>
</tr>
</table>
</div>

<div id="main">
<h2 class="doctitle">MapOrthographic</h2>
<table>
<tr><td class="docsubtitle" valign=top>Syntax</td></tr>
<tr><td></td><td class="docbox" style="font-family: courier;">int MapOrthographic(int ssze,void *src,int dsze,void *dst,void *data);</td></tr>

<tr><td class="docsubtitle" valign=top>Header</td></tr>
<tr><td></td>
<td class="docbox" style="font-family: courier;">general/rmap.h</td></tr>

<tr><td class=docsubtitle>Library</td></tr>
<tr><td></td><td style="font-family: courier;"><a href="index.html">map</a></td></tr>
<tr><td class="docsubtitle">Description</td></tr>
<tr><td></td><td class="docbody"><p>The <a href="MapOrthographic.html"><code>MapOrthographic</code></a> performs a orthographic projection of a map coordinate.</p>
<p>The size in bytes of the input coordinate is given be the argument <em>ssze</em>. The coordinate data is pointed to by the argument <em>src</em>. The first two elements stored in the coordinate data block are assumed to be single precision floating point numbers of type <code>float</code> that represent the longitude and latitude of the coordinate.</p>
<p>The size in bytes of the output coordinate is given be the argument <em>dsze</em>. The coordinate data is pointed to by the argument <em>dst</em>. The first two elements stored in the coordinate data block are assumed to be single precision floating point numbers of type <code>float</code> that represent the cartesian coordinates calculated from the transform. The coordinates are normalized so that they range from zero to (1).</p>
<p>The argument <em>data</em> is a pointer to an array of single precision floating point numbers that contains the parameters of the transform. The first two elements of the array define the latitude and longitude of the center of the projection.The final element is a flag indicating whether the projection should be mirrored about the y-axis.</p>
</td></tr>
<tr><td class="docsubtitle">Returns</td></tr>
<tr><td></td><td>Returns zero if the transformation was successful.On error, (-1) is returned.</td></tr>
<tr><td class="docsubtitle">Errors</td></tr>
<tr><td></td><td>On error, (-1) is returned.</td></tr>
<tr><td class="docsubtitle">Example</td></tr>
<tr><td></td><td><br><center><img src="img/MapOrthographic.png"></img><br></center>
         <br><center>Source Code: <a href="src/MapOrthographic.c">MapOrthographic.c</a></center><br><table width="540" cellpadding="4"><tr><td class="docbox"><pre width="60">/* MapOrthographic.c
   ===============
   Author: R.J.Barnes
 Copyright (c) 2012 The Johns Hopkins University/Applied Physics Laboratory

This file is part of the Radar Software Toolkit (RST).

RST is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with this program. If not, see &lt;https://www.gnu.org/licenses/&gt;.

Modifications:




#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &quot;rtypes.h&quot;
#include &quot;rxml.h&quot;
#include &quot;option.h&quot;
#include &quot;rfbuffer.h&quot;
#include &quot;rplot.h&quot;
#include &quot;polygon.h&quot;
#include &quot;rmap.h&quot;

struct PolygonData *map;
struct PolygonData *nmap;
struct PolygonData *pmap;

struct PolygonData *clip;

int stream(char *buf,int sze,void *data) {
  FILE *fp;
  fp=(FILE *) data;
  fwrite(buf,sze,1,stdout);
  return 0;
} 

int main(int argc,char *argv[]) {

  struct Rplot *rplot=NULL;

  float wdt=400,hgt=400;


 float src[2],dst[2];

  unsigned int bgcol=0xffffffff;
  unsigned int lndcol=0xffa0ffa0;
  unsigned int seacol=0xffa0a0ff;
  unsigned int grdcol=0xffa00000;

 
  MapTransform  tfunc;
  float marg[3];

  int s;  
  char *envstr;
  FILE *mapfp;

  envstr=getenv(&quot;MAPDATA&quot;);

  mapfp=fopen(envstr,&quot;r&quot;);
  map=MapFread(mapfp);
  fclose(mapfp);   

  marg[0]=90.0;
  marg[1]=0.0;
  marg[2]=1.0;

  tfunc=MapOrthographic;

  clip=MapCircleClip(10); 

  nmap=PolygonTransform(map,2*sizeof(float),PolygonXYbbox,
                        tfunc,marg);

  pmap=PolygonClip(clip,nmap); 
 
  rplot=RplotMake();
  RplotSetText(rplot,stream,stdout);   
  RplotMakeDocument(rplot,&quot;MapCircleRead&quot;,&quot;1&quot;,wdt,hgt,24);

  RplotMakePlot(rplot,&quot;MapCircleRead&quot;,wdt,hgt,24);

  RplotRectangle(rplot,NULL,0,0,wdt,hgt,
                  1,bgcol,0x0f,0,NULL);
  RplotEllipse(rplot,NULL,wdt/2,hgt/2,wdt/2,hgt/2,
                  1,seacol,0x0f,0,NULL);

  MapPlotPolygon(rplot,NULL,0,0,wdt,hgt,1,lndcol,0x0f,0,NULL,
                   pmap,1);

  MapPlotPolygon(rplot,NULL,0,0,wdt,hgt,1,lndcol,0x0f,0,NULL,
                   pmap,3);
  
  MapPlotPolygon(rplot,NULL,0,0,wdt,hgt,1,seacol,0x0f,0,NULL,
                   pmap,0);

  src[0]=53.2;
  src[1]=160.0;

  s=MapOrthographic(2*sizeof(float),src,
                                  2*sizeof(float),dst,marg);

  if (s==0) 
    RplotEllipse(rplot,NULL,wdt*dst[0],hgt*dst[1],8,8,
                  1,grdcol,0x0f,0,NULL);


  RplotEndPlot(rplot);
  RplotEndDocument(rplot);
  return 0;
}
</pre></td></tr></table><br></td></tr>
</table>
<br><br>
</div>

<div id="tail">
</div>

</div>

</body>




